<script>
    var firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
        projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_PROJECT_ID.appspot.com",
        messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
        appId: "YOUR_APP_ID"
    };

    firebase.initializeApp(firebaseConfig);

    var db = firebase.firestore();
    var userId = "4ECxPqQq05Z6MhfzLD8vUWIJ8fj2";

    db.collection("users").doc(userId).collection("visitcard").doc("visitcarID")
        .get()
        .then((doc) => {
            if (doc.exists) {
                var data = doc.data();

                // Vérification des couleurs récupérées
                console.log("Couleur primaire récupérée :", data.primaryColor);

                // Application de la couleur récupérée
                if (data.primaryColor && /^#[0-9A-F]{6}$/i.test(data.primaryColor)) {
                    document.documentElement.style.setProperty('--primaryColor', data.primaryColor);
                } else {
                    console.log("Code couleur invalide ou non présent. Utilisation de la couleur par défaut.");
                }

                // Application des autres données
                document.getElementById("profilePicture").src = data.imageUrl;
                document.getElementById("name").textContent = data.firstName + " " + data.lastName.toUpperCase();
                document.getElementById("description").innerHTML = data.description.replace(/\n/g, '<br>');
                document.getElementById("phone").textContent = data.Phone;
                document.getElementById("email").textContent = data['e-mail'];

                // Application des liens des réseaux sociaux
                if (data.Facebook) {
                    document.getElementById("facebookLink").href = data.Facebook;
                }
                if (data.Instagram) {
                    document.getElementById("instagramLink").href = data.Instagram;
                }
                if (data.LinkedIn) {
                    document.getElementById("linkedinLink").href = data.LinkedIn;
                }
                if (data.Twitter) {
                    document.getElementById("twitterLink").href = data.Twitter;
                }

                // Application des liens personnalisés
                var customLinksContainer = document.getElementById("customLinksContainer");
                if (data.titleLink1) {
                    var link1 = document.createElement("div");
                    link1.textContent = data.titleLink1;
                    customLinksContainer.appendChild(link1);
                }
                if (data.titleLink2) {
                    var link2 = document.createElement("div");
                    link2.textContent = data.titleLink2;
                    customLinksContainer.appendChild(link2);
                }
            } else {
                console.log("Le document n'existe pas !");
            }
        }).catch((error) => {
            console.log("Erreur lors de la récupération du document :", error);
        });
</script>
